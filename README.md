# petwise-backend

[![stepwiselogo](readme-images/stepwise-logo.png)](https://stepwise.pl/)

The project provides a REST API for the [Petwise Application](https://gitlab.com/stepwise/petwise/petwise-app). 

## Overview and technical features

* Integration with Google Cloudâ€™s [Vision API](https://cloud.google.com/vision/)

## Getting Started

To clone this repository, execute the following in the command line:
```bash
$ https://gitlab.com/stepwise/petwise/petwise-backend.git
```

### Maven wrapper support
To ensure fully encapsulated build setup provided within the project, Spring Boot provides maven wrapper.

You can build the application:
* on Ubuntu with the following command:
```bash
$ ./mvnw clean install
```
* on Windows with the following command:
```bash
$ mvnw.cmd clean install
```

Optional: If you are working on IntelliJ IDEA, you may add [Maven wrapper support](https://plugins.jetbrains.com/plugin/10633-maven-wrapper-support/versions) plugin to the IDE.

### Google API key

To run this project locally, ask for a json file with the API key and add its path the following environmental variable in project configuration:
```
GOOGLE_APPLICATION_CREDENTIALS="your-path-to-the-file.json"
```
![add-api-key-image](readme-images/add-api-key.png)

[Google authentication documentation](https://cloud.google.com/docs/authentication/getting-started)

## Running tests

> Configure tests to use the `GOOGLE_APPLICATION_CREDENTIALS` variable.

Run all backend tests with the following command in the root directory:
```bash
$ ./mvnw test
```

You can also start the application and manually test the API in Postman - using photos that are already provided for you in the `resources` directory:
![test-in-postman-image](readme-images/test-in-postman.png)

List of urls that will work:
* `http://localhost:8080/api/test?filepath=test-pictures/dog1.jpg`
* `http://localhost:8080/api/test?filepath=test-pictures/dog2.jpg`
* `http://localhost:8080/api/test?filepath=test-pictures/dog3.jpg`

## API documentation

To see the API docs generated by Swagger build and run the application, and visit the ```http://localhost:8080/swagger-ui.html``` link in your browser.

## Built With

* [Spring Boot 2.2.1.RELEASE](https://start.spring.io/)
* [Java 11 - OpenJDK](https://openjdk.java.net/projects/jdk/11/) - [How to install](https://openjdk.java.net/install/)
* [Apache Maven 3.6.2](https://maven.apache.org/docs/3.6.2/release-notes.html)
* [Docker](https://spring.io/guides/gs/spring-boot-docker/) - [feature documentation](https://spring.io/guides/gs/spring-boot-docker/)
* [JUnit 5](https://junit.org/junit5/docs/current/user-guide/#overview)
* [PostgreSQL](https://www.postgresql.org/)
